<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Markdown Lite PWA</title>
  
  <!-- PWA関連 -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#007acc">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="MarkdownLite">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  
  <!-- スタイルシート -->
  <link rel="stylesheet" href="styles.css">
  
  <!-- Marked.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/marked@12.0.0/marked.min.js"></script>
</head>
<body class="light">
  <header class="bar">
    <button id="openFolder" class="btn primary">フォルダを開く</button>
    <button id="openFile" class="btn">ファイルを開く</button>
    <button id="refreshBtn" class="btn" title="ファイル一覧を更新">🔄</button>
    <div class="seg">
      <button id="toEdit" class="seg-btn">編集</button>
      <button id="toPreview" class="seg-btn active">プレビュー</button>
    </div>
    <select id="lineSelect" class="btn">
      <option value="1.30">狭い</option>
      <option value="1.38" selected>標準</option>
      <option value="1.45">やや広い</option>
      <option value="1.60">広い</option>
    </select>
    <div class="spacer"></div>
    <button id="newBtn" class="btn">新規</button>
    <button id="saveBtn" class="btn primary">保存</button>
    <button id="saveAsBtn" class="btn">名前をつけて保存</button>
  </header>

  <div class="path">
    <span id="folderPath">PWA版 Markdown Lite - File System Access API対応</span>
  </div>

  <main class="layout">
    <aside class="side">
      <div class="controls">
        <input id="search" placeholder="ファイル名で検索">
        <div class="row">
          <label>並び替え:</label>
          <select id="sortKey">
            <option value="name">名前</option>
            <option value="modified">更新日</option>
          </select>
          <select id="sortDir">
            <option value="asc">昇順</option>
            <option value="desc">降順</option>
          </select>
        </div>
      </div>
      <div id="fileList" class="file-list">
        <div class="empty-state">
          <h3>📁 ファイルを開いて始めましょう</h3>
          <p>「フォルダを開く」または「ファイルを開く」ボタンをクリックしてください</p>
          <div class="feature-list">
            <h4>PWA版の特徴:</h4>
            <ul>
              <li>📱 iPhone/iPadで使用可能</li>
              <li>📂 Google Drive直接アクセス</li>
              <li>⚡ オフライン対応</li>
              <li>🏠 ホーム画面に追加可能</li>
            </ul>
          </div>
        </div>
      </div>
    </aside>

    <section class="content">
      <input id="fileTitle" placeholder="無題のドキュメント">
      <textarea id="editor" class="hidden" spellcheck="false" placeholder="# ここにMarkdownを入力してください

## 見出し2
段落のテキスト。**太字**や*斜体*、`インラインコード`が使えます。

### リスト
- アイテム1
- アイテム2
- アイテム3

### チェックリスト
- [x] 完了したタスク
- [ ] 未完了のタスク

### コードブロック
```javascript
console.log('Hello, Markdown!');
```

### リンク
[GitHub](https://github.com)でソースコードを見る。"></textarea>
      
      <div id="preview" class="preview">
        <div class="welcome-screen">
          <h1>🚀 Markdown Lite PWA へようこそ</h1>
          <p>軽量でパワフルなMarkdownエディタのPWA版です。</p>
          
          <div class="quick-start">
            <h2>🎯 クイックスタート</h2>
            <ol>
              <li><strong>フォルダを開く</strong>: Google Driveのフォルダを選択</li>
              <li><strong>ファイルを開く</strong>: 既存の.mdファイルを編集</li>
              <li><strong>新規作成</strong>: 新しいMarkdownファイルを作成</li>
            </ol>
          </div>

          <div class="features">
            <h2>✨ 主な機能</h2>
            <div class="feature-grid">
              <div class="feature-card">
                <h3>📱 クロスプラットフォーム</h3>
                <p>iPhone、iPad、Android、デスクトップで動作</p>
              </div>
              <div class="feature-card">
                <h3>📂 ファイルシステム連携</h3>
                <p>Google Driveと直接連携。ファイルアプリからアクセス可能</p>
              </div>
              <div class="feature-card">
                <h3>⚡ オフライン対応</h3>
                <p>インターネット接続なしでも編集可能</p>
              </div>
              <div class="feature-card">
                <h3>🔄 リアルタイムプレビュー</h3>
                <p>入力と同時にMarkdownをプレビュー</p>
              </div>
            </div>
          </div>

          <div class="installation">
            <h2>📲 インストール方法</h2>
            <h3>iOS/iPadOS:</h3>
            <ol>
              <li>Safariでこのページを開く</li>
              <li>共有ボタン → 「ホーム画面に追加」</li>
              <li>「追加」をタップ</li>
            </ol>
            
            <h3>Android:</h3>
            <ol>
              <li>Chrome でこのページを開く</li>
              <li>メニュー → 「ホーム画面に追加」</li>
              <li>「追加」をタップ</li>
            </ol>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="status">
    <div class="status-line">
      <span id="status">準備完了</span>
      <span id="fileInfo"></span>
    </div>
    <div class="pwa-info">
      <span id="installPrompt" class="hidden">
        📲 <a href="#" id="installBtn">アプリをインストール</a>
      </span>
      <span id="offlineIndicator" class="hidden">📶 オフライン</span>
    </div>
  </footer>

  <!-- メインアプリケーションスクリプト -->
  <script src="app.js"></script>
</body>
</html>